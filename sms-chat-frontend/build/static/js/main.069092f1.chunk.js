(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,c){},104:function(e,t,c){},105:function(e,t,c){},106:function(e,t,c){},107:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(49),i=c.n(a),l=c(7),s=c(50),r=c(24),j=c.n(r),o=c(0),d=Object(n.createContext)(),u=Object(s.io)("https://video-chat-backend-v055.onrender.com"),b=function(e){var t=e.children,c=Object(n.useState)(!1),a=Object(l.a)(c,2),i=a[0],s=a[1],r=Object(n.useState)(!1),b=Object(l.a)(r,2),O=b[0],m=b[1],h=Object(n.useState)(),f=Object(l.a)(h,2),v=f[0],x=f[1],p=Object(n.useState)(""),C=Object(l.a)(p,2),g=C[0],N=C[1],y=Object(n.useState)({}),w=Object(l.a)(y,2),k=w[0],S=w[1],A=Object(n.useState)(""),E=Object(l.a)(A,2),U=E[0],D=E[1],I=Object(n.useRef)(),R=Object(n.useRef)(),V=Object(n.useRef)();Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){x(e),I.current.srcObject=e})),u.on("me",(function(e){return D(e)})),u.on("callUser",(function(e){var t=e.from,c=e.name,n=e.signal;S({isReceivingCall:!0,from:t,name:c,signal:n})}))}),[]);return Object(o.jsx)(d.Provider,{value:{call:k,callAccepted:i,myVideo:I,userVideo:R,stream:v,name:g,setName:N,callEnded:O,me:U,callUser:function(e){var t=new j.a({initiator:!0,trickle:!1,stream:v});t.on("signal",(function(t){u.emit("callUser",{userToCall:e,signalData:t,from:U,name:g})})),t.on("stream",(function(e){R.current.srcObject=e})),u.on("callAccepted",(function(e){s(!0),t.signal(e)})),V.current=t},leaveCall:function(){m(!0),V.current.destroy(),window.location.reload()},answerCall:function(){s(!0);var e=new j.a({initiator:!1,trickle:!1,stream:v});e.on("signal",(function(e){u.emit("answerCall",{signal:e,to:k.from})})),e.on("stream",(function(e){R.current.srcObject=e})),e.signal(k.signal),V.current=e}},children:t})},O=(c(99),function(){var e=Object(n.useContext)(d),t=e.callAccepted,c=e.myVideo,a=e.userVideo,i=e.callEnded,l=e.stream;return Object(o.jsxs)("div",{className:"video",children:[l&&Object(o.jsx)("div",{children:Object(o.jsx)("div",{item:!0,xs:12,md:6,children:Object(o.jsx)("video",{className:"player",playsInline:!0,muted:!0,ref:c,autoPlay:!0})})}),t&&!i&&Object(o.jsx)("div",{children:Object(o.jsx)("div",{children:Object(o.jsx)("video",{className:"player",playsInline:!0,ref:a,autoPlay:!0})})})]})}),m=c(51),h=(c(103),function(e){var t=e.children,c=Object(n.useContext)(d),a=c.me,i=c.callAccepted,s=c.name,r=c.setName,j=c.callEnded,u=c.leaveCall,b=c.callUser,O=Object(n.useState)(""),h=Object(l.a)(O,2),f=h[0],v=h[1];return Object(o.jsx)("div",{children:Object(o.jsxs)("div",{children:[Object(o.jsx)("form",{autoComplete:"off",children:Object(o.jsxs)("div",{className:"form",children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("h3",{children:"Enter Name"}),Object(o.jsx)("input",{value:s,onChange:function(e){return r(e.target.value)}}),Object(o.jsx)(m.CopyToClipboard,{text:a,children:Object(o.jsx)("div",{className:"button",children:"Copy ID"})})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h3",{children:"Meeting ID"}),Object(o.jsx)("input",{value:f,onChange:function(e){return v(e.target.value)}}),i&&!j?Object(o.jsx)("div",{className:"button decline",onClick:u,children:"Hang Up"}):Object(o.jsx)("div",{className:"button",onClick:function(){return b(f)},children:"Call"})]})]})}),t]})})}),f=(c(104),function(){var e=Object(n.useContext)(d),t=e.answerCall,c=e.call,a=e.callAccepted,i=e.leaveCall;return Object(o.jsx)(o.Fragment,{children:c.isReceivingCall&&!a&&Object(o.jsxs)("div",{className:"call",children:[Object(o.jsxs)("h3",{children:["Call from ",c.name?c.name:"unknown"]}),Object(o.jsx)("div",{className:"button",onClick:t,children:"Answer"}),Object(o.jsx)("div",{className:"button decline",onClick:i,children:"Decline"})]})})});c(105);function v(){return Object(o.jsxs)("div",{className:"header",children:[Object(o.jsx)("h1",{children:"Lets Meet"}),Object(o.jsx)("a",{href:"https://sms-home.netlify.app/dashboard",children:Object(o.jsx)("h1",{children:"Home"})})]})}function x(){return Object(o.jsxs)("div",{children:[Object(o.jsx)(v,{}),Object(o.jsx)(h,{children:Object(o.jsx)(f,{})}),Object(o.jsx)(O,{})]})}c(106);i.a.render(Object(o.jsx)(b,{children:Object(o.jsx)(x,{})}),document.getElementById("root"))},87:function(e,t){},89:function(e,t){},99:function(e,t,c){}},[[107,1,2]]]);
//# sourceMappingURL=main.069092f1.chunk.js.map